(this["webpackJsonpboard-game-collection-visualizer"]=this["webpackJsonpboard-game-collection-visualizer"]||[]).push([[0],{48:function(e,t,a){e.exports=a(64)},53:function(e,t,a){},59:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),i=a.n(c),o=(a(53),a(11)),m=a(99),l=a(94),s=a(98),u=a(30),p=a(31);a(59);function g(e){return r.a.createElement("div",{className:"board-game-gallery"},r.a.createElement(m.a,{cols:4,cellHeight:250},function(t){var a=["maxplayers"];return t.sort((function(t,n){return a.includes(e.sort)?n[e.sort]-t[e.sort]:"name"===e.sort?t[e.sort].localeCompare(n[e.sort]):t[e.sort]-n[e.sort]})),t}(e.games).map((function(e){var t=r.a.createElement("div",{className:"game-info-bar"},r.a.createElement("div",{className:"title"},e.name),r.a.createElement("div",{className:"players"},r.a.createElement(u.a,{icon:p.c}),e.minplayers===e.maxplayers?"".concat(e.minplayers):"".concat(e.minplayers,"-").concat(e.maxplayers)),r.a.createElement("div",{className:"time"},r.a.createElement(u.a,{icon:p.a}),e.minplaytime===e.maxplaytime?"".concat(e.minplaytime):"".concat(e.minplaytime,"-").concat(e.maxplaytime)));return r.a.createElement(l.a,{key:e.id},r.a.createElement("img",{src:e.image,alt:e.name}),r.a.createElement(s.a,{title:t}))}))))}var d=a(100),b=a(104),y=a(101);function f(e){var t=Object(n.useRef)(null),a=Object(n.useState)(0),c=Object(o.a)(a,2),i=c[0],m=c[1];return Object(n.useEffect)((function(){m(t.current.offsetWidth)}),[]),r.a.createElement(d.a,{variant:"outlined"},r.a.createElement(b.a,{ref:t,htmlFor:"outlined-sort-native-simple"},"Sort"),r.a.createElement(y.a,{native:!0,value:e.currentSort,onChange:function(t){e.selectSort(t.target.value)},labelWidth:i,inputProps:{name:"sort",id:"outlined-sort-native-simple"},className:"search-bar-input"},[{name:"name",display:"Name"},{name:"yearpublished",display:"Year Published"},{name:"minplayers",display:"Minimum Players"},{name:"maxplayers",display:"Maximum Players"},{name:"playingtime",display:"Play Time"}].map((function(e){return r.a.createElement("option",{value:e.name,key:e.name},e.display)}))))}var h=a(102),E=a(106),v=a(103);function x(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],i=a[1],m=e.setUsername;Object(n.useEffect)((function(){var e=new URLSearchParams(window.location.search);e.has("username")&&(m(e.get("username")),i(e.get("username")))}),[m]);var l=Object(n.useRef)(null),s=Object(n.useState)(0),g=Object(o.a)(s,2),y=g[0],f=g[1];Object(n.useEffect)((function(){f(l.current.offsetWidth)}),[]);return r.a.createElement(d.a,{className:"search-bar-input",variant:"outlined"},r.a.createElement(b.a,{ref:l,htmlFor:"username-search"},"Username"),r.a.createElement(E.a,{id:"username-search",value:c,onKeyUp:function(e){13!==e.charCode&&"Enter"!==e.key||m(c)},onChange:function(e){i(e.target.value)},endAdornment:r.a.createElement(v.a,{position:"end"},r.a.createElement(h.a,{onClick:function(){return m(c)},className:"search-bar-button",edge:"end"},r.a.createElement(u.a,{icon:p.b}))),labelWidth:y}))}var O=a(37),S=a.n(O),j=a(41),w=function(e,t){return e.getElementsByTagName(t)[0].getAttribute("value")},N=function(e,t){return Array.from(e.querySelectorAll("link[type=".concat(t,"]"))).map((function(e){return e.getAttribute("value")}))},A={getCollectionForUser:function(e){return fetch("https://www.boardgamegeek.com/xmlapi2/collection?username=".concat(e,"&excludesubtype=boardgameexpansion&own=1")).then((function(e){return e.text()})).then((function(e){return(new DOMParser).parseFromString(e,"text/xml")})).then((function(e){return Promise.all(Array.from(e.getElementsByTagName("item")).map((function(e){var t=e.getAttribute("objectid");return A.getBoardGame(t)})))})).catch((function(e){return console.log("Error: ".concat(e)),[{error:e}]}))},getBoardGame:function(){var e=Object(j.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://www.boardgamegeek.com/xmlapi2/thing?id=".concat(t,"&type=boardgame")).then((function(e){return e.text()})).then((function(e){return(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("item")[0]})).then((function(e){return{id:(t=e).getAttribute("id"),name:t.querySelector('name[type="primary"]').getAttribute("value"),description:t.getElementsByTagName("description")[0].innerHTML,image:t.getElementsByTagName("image")[0].innerHTML,thumbnail:t.getElementsByTagName("thumbnail")[0].innerHTML,yearpublished:w(t,"yearpublished"),minplayers:w(t,"minplayers"),maxplayers:w(t,"maxplayers"),playingtime:w(t,"playingtime"),minplaytime:w(t,"minplaytime"),maxplaytime:w(t,"maxplaytime"),boardgamecategory:N(t,"boardgamecategory"),boardgamemechanic:N(t,"boardgamemechanic"),boardgamefamily:N(t,"boardgamefamily"),boardgamedesigner:N(t,"boardgamedesigner"),boardgameartist:N(t,"boardgameartist"),boardgamepublisher:N(t,"boardgamepublisher")};var t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=A;a(62);function T(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],i=a[1],m=e.setCollection;return Object(n.useEffect)((function(){""!==c&&C.getCollectionForUser(c).then((function(e){m(e)}))}),[c,m]),r.a.createElement("div",{className:"search-bar"},r.a.createElement(x,{setUsername:i}),r.a.createElement(f,{currentSort:e.collectionSort,selectSort:e.setCollectionSort}))}a(63);var k=function(){var e,t=Object(n.useState)(Array()),a=Object(o.a)(t,2),c=a[0],i=a[1],m=Object(n.useState)("name"),l=Object(o.a)(m,2),s=l[0],u=l[1];return e=c.length&&c[0].hasOwnProperty("error")?r.a.createElement("div",{className:"bgg-error"},r.a.createElement("div",null,"Sorry, something has gone wrong.",r.a.createElement("br",null),"Try again in a few minutes.")):r.a.createElement(g,{games:c,sort:s}),r.a.createElement("div",{className:"App"},r.a.createElement(T,{collection:c,setCollection:i,collectionSort:s,setCollectionSort:u}),e)};i.a.render(r.a.createElement(k,null),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.cc4a108d.chunk.js.map