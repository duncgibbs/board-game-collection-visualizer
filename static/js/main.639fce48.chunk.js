(this["webpackJsonpboard-game-collection-visualizer"]=this["webpackJsonpboard-game-collection-visualizer"]||[]).push([[0],{71:function(e,t,a){e.exports=a(88)},76:function(e,t,a){},82:function(e,t,a){},84:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(9),l=a.n(i),c=(a(76),a(10)),o=a(130),m=a(125),s=a(129),u=a(37),d=a(38),f={rangeFilter:function(e,t,a,r){return(e>=a||t>=a)&&(e<=r||t<=r)},listFilter:function(e,t){return!t.length||e.some((function(e){return t.includes(e)}))},playercount:function(e,t){return f.rangeFilter(e.minplayers,e.maxplayers,t.min,t.max)},playtime:function(e,t){return f.rangeFilter(e.minplaytime,e.maxplaytime,t.min,t.max)},yearpublished:function(e,t){return f.rangeFilter(e.yearpublished,e.yearpublished,t.min,t.max)},boardgamecategory:function(e,t){return f.listFilter(e.boardgamecategory,t)},boardgamemechanic:function(e,t){return f.listFilter(e.boardgamemechanic,t)},boardgamefamily:function(e,t){return f.listFilter(e.boardgamefamily,t)},boardgamedesigner:function(e,t){return f.listFilter(e.boardgamedesigner,t)},boardgameartist:function(e,t){return f.listFilter(e.boardgameartist,t)},boardgamepublisher:function(e,t){return f.listFilter(e.boardgamepublisher,t)}},b=f,g=["maxplayers"],y={sortBoardGames:function(e,t){return e.sort((function(e,a){return g.includes(t)?a[t]-e[t]:"name"===t?e[t].localeCompare(a[t]):e[t]-a[t]})),e},filterBoardGames:function(e,t){return e.filter((function(e){return!Object.keys(t).map((function(a){return b[a](e,t[a])})).includes(!1)}))},getFilterData:function(e){var t=function(e,t){return e.hasOwnProperty(t)?e[t]+=1:e[t]=1,e};return e.reduce((function(e,a){return{minPlayerCount:Math.min(e.minPlayerCount,a.minplayers),maxPlayerCount:Math.max(e.maxPlayerCount,a.maxplayers),minPlayTime:Math.min(e.minPlayTime,a.minplaytime),maxPlayTime:Math.max(e.maxPlayTime,a.maxplaytime),years:(r=e.years,n=a.yearpublished,r.includes(n)||(r.push(n),r.sort()),r),category:a.boardgamecategory.reduce(t,e.category),mechanic:a.boardgamemechanic.reduce(t,e.mechanic),family:a.boardgamefamily.reduce(t,e.family),designer:a.boardgamedesigner.reduce(t,e.designer),artist:a.boardgameartist.reduce(t,e.artist),publisher:a.boardgamepublisher.reduce(t,e.publisher)};var r,n}),{minPlayerCount:1/0,maxPlayerCount:-1/0,minPlayTime:1/0,maxPlayTime:-1/0,years:[],category:{},mechanic:{},family:{},designer:{},artist:{},publisher:{}})}};a(82);function p(e){var t=y.sortBoardGames(y.filterBoardGames(e.games,e.filters),e.sort);return n.a.createElement("div",{className:"board-game-gallery"},n.a.createElement(o.a,{cols:4,cellHeight:250},t.map((function(e){var t=n.a.createElement("div",{className:"game-info-bar"},n.a.createElement("div",{className:"title"},e.name),n.a.createElement("div",{className:"players"},n.a.createElement(u.a,{icon:d.c}),e.minplayers===e.maxplayers?"".concat(e.minplayers):"".concat(e.minplayers,"-").concat(e.maxplayers)),n.a.createElement("div",{className:"time"},n.a.createElement(u.a,{icon:d.a}),e.minplaytime===e.maxplaytime?"".concat(e.minplaytime):"".concat(e.minplaytime,"-").concat(e.maxplaytime)));return n.a.createElement(m.a,{key:e.id},n.a.createElement("img",{src:e.image,alt:e.name}),n.a.createElement(s.a,{title:t}))}))))}var h=a(141),v=a(142),E=a(131),x=a(150),O=a(143);function F(e){var t=Object(r.useRef)(null),a=Object(r.useState)(0),i=Object(c.a)(a,2),l=i[0],o=i[1];return Object(r.useEffect)((function(){o(t.current.offsetWidth)}),[]),n.a.createElement(E.a,{variant:"outlined",className:"search-bar-input collection-sort toolbar-button-container"},n.a.createElement(x.a,{ref:t,htmlFor:"outlined-sort-native-simple"},"Sort"),n.a.createElement(O.a,{native:!0,value:e.currentSort,onChange:function(t){e.selectSort(t.target.value)},labelWidth:l,inputProps:{name:"sort",id:"outlined-sort-native-simple"}},[{name:"name",display:"Name"},{name:"yearpublished",display:"Year Published"},{name:"minplayers",display:"Minimum Players"},{name:"maxplayers",display:"Maximum Players"},{name:"playingtime",display:"Play Time"}].map((function(e){return n.a.createElement("option",{value:e.name,key:e.name},e.display)}))))}var j=a(134),C=a(148),k=a(133);function P(e){var t=Object(r.useState)(""),a=Object(c.a)(t,2),i=a[0],l=a[1],o=e.setUsername;Object(r.useEffect)((function(){var e=new URLSearchParams(window.location.search);e.has("username")&&(o(e.get("username")),l(e.get("username")))}),[o]);var m=Object(r.useRef)(null),s=Object(r.useState)(0),f=Object(c.a)(s,2),b=f[0],g=f[1];Object(r.useEffect)((function(){g(m.current.offsetWidth)}),[]);return n.a.createElement(E.a,{className:"search-bar-input username-search toolbar-button-container",variant:"outlined"},n.a.createElement(x.a,{ref:m,htmlFor:"username-search"},"Username"),n.a.createElement(C.a,{id:"username-search",value:i,onKeyUp:function(e){13!==e.charCode&&"Enter"!==e.key||o(i)},onChange:function(e){l(e.target.value)},endAdornment:n.a.createElement(k.a,{position:"end"},n.a.createElement(j.a,{onClick:function(){return o(i)},className:"search-bar-button",edge:"end"},n.a.createElement(u.a,{icon:d.b}))),labelWidth:b}))}var N=a(147),S=a(138),w=a(144),T=a(47),B=a(132),A=a(140),M=a(139),D=a(60),L=a(149);function G(e){var t=Object(r.useState)((function(){return e.currentFilter?e.currentFilter:[e.range.min,e.range.max]})),a=Object(c.a)(t,2),i=a[0],l=a[1];return n.a.createElement("div",{className:"".concat(e.classes," range-slider-filter")},n.a.createElement(D.a,{variant:"h6",className:"filter-list-item-title",gutterBottom:!0},e.title),n.a.createElement(D.a,{variant:"subtitle1"},i[0]," - ",i[1]),n.a.createElement(L.a,{id:"range-slider",value:i,onChange:function(e,t){l(t)},onChangeCommitted:function(t,a){e.setFilter(a)},valueLabelDisplay:"off","aria-labelledby":"range-slider",min:e.range.min,max:e.range.max,track:e.track,marks:!0,step:e.step}))}function U(e){var t=Object(r.useState)((function(){if(e.currentFilter){var t=e.currentFilter[0],a=e.currentFilter[1];return[e.years.indexOf(t),e.years.indexOf(a)]}return[0,e.years.length-1]})),a=Object(c.a)(t,2),i=a[0],l=a[1];return n.a.createElement("div",{className:"year-published-slider range-slider-filter"},n.a.createElement(D.a,{variant:"h6",className:"filter-list-item-title",gutterBottom:!0},"Year Published"),n.a.createElement(D.a,{variant:"subtitle1"},e.years[i[0]]," - ",e.years[i[1]]),n.a.createElement(L.a,{id:"range-slider",value:i,onChange:function(e,t){l(t)},onChangeCommitted:function(t,a){var r=a,n=[e.years[r[0]],e.years[r[1]]];e.setFilter(n)},valueLabelDisplay:"off","aria-labelledby":"range-slider",min:0,max:e.years.length-1,marks:!0}))}var H=a(14),W=a(137),z=a(146),R=a(136);function q(e){var t=Object(r.useState)(!1),a=Object(c.a)(t,2),i=a[0],l=a[1],o=Object.keys(e.options).sort((function(t,a){return e.options[a]-e.options[t]})),m=function(t){var a=t.target.value;e.currentFilter.includes(a)?e.setFilter(e.currentFilter.filter((function(e){return e!==a}))):e.setFilter([].concat(Object(H.a)(e.currentFilter),[a]))},s=function(t){return n.a.createElement("div",{className:"check-list-option",key:t.toLocaleLowerCase()},n.a.createElement(R.a,{control:n.a.createElement(z.a,{color:"default",checked:e.currentFilter.includes(t),onChange:m,value:t}),label:t}),n.a.createElement(N.a,{label:"".concat(e.options[t]),variant:"outlined"}))};return n.a.createElement("div",{className:e.classes},n.a.createElement(D.a,{variant:"h6",className:"filter-list-item-title",gutterBottom:!0},e.title),n.a.createElement("div",{className:"check-list-container"},o.slice(0,10).map(s),n.a.createElement(W.a,{in:i,unmountOnExit:!0},o.slice(10).map(s)),n.a.createElement(S.a,{variant:"outlined",onClick:function(){return l(!i)}},i?"Hide":"See All")))}function J(e){var t=e.collection,a=e.filters,r=e.setFilters,i=y.getFilterData(t),l=[{filter:"playercount",title:"Player Count",track:"normal",step:1,range:{min:i.minPlayerCount,max:i.maxPlayerCount}},{filter:"playtime",title:"Play Time",track:"normal",step:5,range:{min:i.minPlayTime,max:i.maxPlayTime}}];return console.log(i),n.a.createElement(B.a,{disablePadding:!0},n.a.createElement(M.a,null,n.a.createElement(D.a,{variant:"h5"},"Filters"),n.a.createElement(S.a,{onClick:e.closeDrawer,className:"close-btn"},"Close")),l.map((function(e){return n.a.createElement(A.a,{key:e.filter},n.a.createElement(G,{title:e.title,classes:"".concat(e.filter,"-slider"),track:e.track,step:e.step,range:e.range,currentFilter:a[e.filter]?[a[e.filter].min,a[e.filter].max]:void 0,setFilter:function(t){var n={};n[e.filter]={min:t[0],max:t[1]},r(Object(T.a)({},a,{},n))}}))})),n.a.createElement(A.a,null,n.a.createElement(U,{years:i.years,currentFilter:a.yearpublished?[a.yearpublished.min,a.yearpublished.max]:void 0,setFilter:function(e){var t={yearpublished:{min:e[0],max:e[1]}};r(Object(T.a)({},a,{},t))}})),["category","mechanic","family","designer","artist","publisher"].map((function(e){var t="boardgame".concat(e);return n.a.createElement(A.a,{key:t},n.a.createElement(q,{title:e,classes:"".concat(e,"-checklist"),options:i[e],currentFilter:a[t]||[],setFilter:function(e){var n={};n[t]=e,r(Object(T.a)({},a,{},n))}}))})))}a(84);function Y(e){var t=Object(r.useState)(!1),a=Object(c.a)(t,2),i=a[0],l=a[1],o=Object(r.useState)(0),m=Object(c.a)(o,2),s=m[0],u=m[1],d=Object(r.useState)({}),f=Object(c.a)(d,2),b=f[0],g=f[1],y=e.setCollectionFilter;return Object(r.useEffect)((function(){u(Object.keys(b).length),y(b)}),[b,y]),n.a.createElement("div",{className:"filter-drawer-btn-wrapper toolbar-button-container"},n.a.createElement(S.a,{onClick:function(){return l(!0)},className:"search-bar-input",variant:"outlined"},"Filters",n.a.createElement(N.a,{variant:"outlined",size:"small",label:s})),n.a.createElement(w.a,{className:"filter-drawer-wrapper",open:i,onClose:function(){return l(!1)},onOpen:function(){return l(!0)},anchor:"bottom"},n.a.createElement(J,{collection:e.collection,filters:b,setFilters:g,closeDrawer:function(){return l(!1)}})))}var I=a(51),K=a.n(I),Q=a(59),V=function(e,t){return e.getElementsByTagName(t)[0].getAttribute("value")},X=function(e,t){return Array.from(e.querySelectorAll("link[type=".concat(t,"]"))).map((function(e){return e.getAttribute("value")}))},Z={getCollectionForUser:function(e){return fetch("https://www.boardgamegeek.com/xmlapi2/collection?username=".concat(e,"&excludesubtype=boardgameexpansion&own=1")).then((function(e){return e.text()})).then((function(e){return(new DOMParser).parseFromString(e,"text/xml")})).then((function(e){return Promise.all(Array.from(e.getElementsByTagName("item")).map((function(e){var t=e.getAttribute("objectid");return Z.getBoardGame(t)})))})).catch((function(e){return console.log("Error: ".concat(e)),[{error:e}]}))},getBoardGame:function(){var e=Object(Q.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://www.boardgamegeek.com/xmlapi2/thing?id=".concat(t,"&type=boardgame")).then((function(e){return e.text()})).then((function(e){return(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("item")[0]})).then((function(e){return{id:(t=e).getAttribute("id"),name:t.querySelector('name[type="primary"]').getAttribute("value"),description:t.getElementsByTagName("description")[0].innerHTML,image:t.getElementsByTagName("image")[0].innerHTML,thumbnail:t.getElementsByTagName("thumbnail")[0].innerHTML,yearpublished:V(t,"yearpublished"),minplayers:V(t,"minplayers"),maxplayers:V(t,"maxplayers"),playingtime:V(t,"playingtime"),minplaytime:V(t,"minplaytime"),maxplaytime:V(t,"maxplaytime"),boardgamecategory:X(t,"boardgamecategory"),boardgamemechanic:X(t,"boardgamemechanic"),boardgamefamily:X(t,"boardgamefamily"),boardgamedesigner:X(t,"boardgamedesigner"),boardgameartist:X(t,"boardgameartist"),boardgamepublisher:X(t,"boardgamepublisher")};var t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},$=Z;a(86);function _(e){var t=Object(r.useState)(""),a=Object(c.a)(t,2),i=a[0],l=a[1],o=e.setCollection;return Object(r.useEffect)((function(){""!==i&&$.getCollectionForUser(i).then((function(e){o(e)}))}),[i,o]),n.a.createElement(h.a,{className:"search-bar",position:"sticky"},n.a.createElement(v.a,{disableGutters:!0},n.a.createElement(P,{setUsername:l}),n.a.createElement(F,{currentSort:e.collectionSort,selectSort:e.setCollectionSort}),n.a.createElement(Y,{collection:e.collection,setCollectionFilter:e.setCollectionFilters})))}a(87);var ee=function(){var e,t=Object(r.useState)(Array()),a=Object(c.a)(t,2),i=a[0],l=a[1],o=Object(r.useState)("name"),m=Object(c.a)(o,2),s=m[0],u=m[1],d=Object(r.useState)({}),f=Object(c.a)(d,2),b=f[0],g=f[1];return e=i.length&&i[0].hasOwnProperty("error")?n.a.createElement("div",{className:"bgg-error"},n.a.createElement("div",null,"Sorry, something has gone wrong.",n.a.createElement("br",null),"Try again in a few minutes.")):n.a.createElement(p,{games:i,sort:s,filters:b}),n.a.createElement("div",{className:"App"},n.a.createElement(_,{collection:i,setCollection:l,collectionSort:s,setCollectionSort:u,setCollectionFilters:g}),e)};l.a.render(n.a.createElement(ee,null),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.639fce48.chunk.js.map