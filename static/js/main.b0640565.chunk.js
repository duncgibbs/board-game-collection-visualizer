(this["webpackJsonpboard-game-collection-visualizer"]=this["webpackJsonpboard-game-collection-visualizer"]||[]).push([[0],{72:function(e,a,t){e.exports=t(89)},77:function(e,a,t){},84:function(e,a,t){},85:function(e,a,t){},87:function(e,a,t){},88:function(e,a,t){},89:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),l=t(10),i=t.n(l),c=(t(77),t(9)),m=t(134),o=t(133),s=t(148),u=t(132),d=t(15),g={rangeFilter:function(e,a,t,r){return(e>=t||a>=t)&&(e<=r||a<=r)},listFilter:function(e,a){return!a.length||e.some((function(e){return a.includes(e)}))},playercount:function(e,a){return g.rangeFilter(e.minplayers,e.maxplayers,a.min,a.max)},playtime:function(e,a){return g.rangeFilter(e.minplaytime,e.maxplaytime,a.min,a.max)},yearpublished:function(e,a){return g.rangeFilter(e.yearpublished,e.yearpublished,a.min,a.max)},boardgamecategory:function(e,a){return g.listFilter(e.boardgamecategory,a)},boardgamemechanic:function(e,a){return g.listFilter(e.boardgamemechanic,a)},boardgamefamily:function(e,a){return g.listFilter(e.boardgamefamily,a)},boardgamedesigner:function(e,a){return g.listFilter(e.boardgamedesigner,a)},boardgameartist:function(e,a){return g.listFilter(e.boardgameartist,a)},boardgamepublisher:function(e,a){return g.listFilter(e.boardgamepublisher,a)}},p=g,b=["maxplayers"],y={sortBoardGames:function(e,a){return e.sort((function(e,t){return b.includes(a)?t[a]-e[a]:"name"===a?e[a].localeCompare(t[a]):e[a]-t[a]})),e},filterBoardGames:function(e,a){return e.filter((function(e){return!Object.keys(a).map((function(t){return p[t](e,a[t])})).includes(!1)}))},getFilterData:function(e){var a=function(e,a){return e.hasOwnProperty(a)?e[a]+=1:e[a]=1,e};return e.reduce((function(e,t){return{minPlayerCount:Math.min(e.minPlayerCount,t.minplayers),maxPlayerCount:Math.max(e.maxPlayerCount,t.maxplayers),minPlayTime:Math.min(e.minPlayTime,t.minplaytime),maxPlayTime:Math.max(e.maxPlayTime,t.maxplaytime),years:(r=e.years,n=t.yearpublished,r.includes(n)||(r.push(n),r.sort()),r),category:t.boardgamecategory.reduce(a,e.category),mechanic:t.boardgamemechanic.reduce(a,e.mechanic),family:t.boardgamefamily.reduce(a,e.family),designer:t.boardgamedesigner.reduce(a,e.designer),artist:t.boardgameartist.reduce(a,e.artist),publisher:t.boardgamepublisher.reduce(a,e.publisher)};var r,n}),{minPlayerCount:1/0,maxPlayerCount:-1/0,minPlayTime:1/0,maxPlayTime:-1/0,years:[],category:{},mechanic:{},family:{},designer:{},artist:{},publisher:{}})}},f=t(128),h=t(37),E=t(38);function v(e){return n.a.createElement("div",{className:"board-game-tile",onClick:function(){return e.onClick(e.game.id)}},n.a.createElement("img",{src:e.game.image,alt:e.game.name,className:"bg-thumbnail"}),n.a.createElement(f.a,{title:n.a.createElement("div",{className:"game-info-bar"},n.a.createElement("div",{className:"title"},e.game.name),n.a.createElement("div",{className:"players"},n.a.createElement(h.a,{icon:E.c}),e.game.minplayers===e.game.maxplayers?"".concat(e.game.minplayers):"".concat(e.game.minplayers,"-").concat(e.game.maxplayers)),n.a.createElement("div",{className:"time"},n.a.createElement(h.a,{icon:E.a}),e.game.minplaytime===e.game.maxplaytime?"".concat(e.game.minplaytime):"".concat(e.game.minplaytime,"-").concat(e.game.maxplaytime)))}))}var O=t(131);function x(e){var a=e.game;return n.a.createElement("div",{className:"inspector-container"},n.a.createElement(O.a,{onClick:function(){return e.closeDrawer()},className:"close-btn",variant:"outlined"},"Close"),n.a.createElement("div",{className:"board-game-info"},n.a.createElement("div",{className:"cover"},n.a.createElement("img",{src:a.image,alt:a.name})),n.a.createElement("div",{className:"basic-info"},n.a.createElement("div",{className:"title"},n.a.createElement("h2",null,a.name)),n.a.createElement("div",{className:"players"},n.a.createElement("strong",null,"Players",n.a.createElement("br",null)),a.minplayers===a.maxplayers?"".concat(a.minplayers):"".concat(a.minplayers,"-").concat(a.maxplayers)),n.a.createElement("div",{className:"playtime"},n.a.createElement("strong",null,"Playing Time",n.a.createElement("br",null)),a.minplaytime===a.maxplaytime?"".concat(a.minplaytime):"".concat(a.minplaytime,"-").concat(a.maxplaytime)),n.a.createElement("div",{className:"yearpublished"},n.a.createElement("strong",null,"Year Published",n.a.createElement("br",null)),a.yearpublished)),n.a.createElement("div",{className:"advanced-info"},[{title:"Categories",prop:"boardgamecategory"},{title:"Mechanics",prop:"boardgamemechanic"},{title:"Families",prop:"boardgamefamily"},{title:"Designers",prop:"boardgamedesigner"},{title:"Artists",prop:"boardgameartist"},{title:"Publishers",prop:"boardgamepublisher"}].map((function(e){return n.a.createElement("div",{className:e.prop,key:e.prop},n.a.createElement("strong",null,e.title,n.a.createElement("br",null)),a[e.prop].join(", "))}))),n.a.createElement("div",{className:"description"},n.a.createElement("strong",null,"Description",n.a.createElement("br",null)),n.a.createElement("p",null,a.description.trim()))))}t(84);function j(e){var a=Object(r.useState)(""),t=Object(c.a)(a,2),l=t[0],i=t[1],g=Object(d.a)(),p=Object(u.a)(g.breakpoints.only("xl")),b=Object(u.a)(g.breakpoints.only("lg")),f=Object(u.a)(g.breakpoints.only("md")),h=Object(u.a)(g.breakpoints.only("sm")),E=y.sortBoardGames(y.filterBoardGames(e.games,e.filters),e.sort);return n.a.createElement("div",{className:"board-game-gallery"},n.a.createElement(m.a,{cols:p?5:b?4:f?3:h?2:1,cellHeight:250},E.map((function(e){return n.a.createElement(o.a,{key:e.id},n.a.createElement(v,{game:e,onClick:function(){return i(e.id)}}),n.a.createElement(s.a,{className:"board-game-inspector",open:l===e.id,onClose:function(){return i(null)},anchor:"bottom"},n.a.createElement(x,{game:e,closeDrawer:function(){i(null),console.log(l)}})))}))))}var F=t(143),N=t(144),C=t(135),k=t(149),P=t(145);function w(e){var a=Object(r.useRef)(null),t=Object(r.useState)(0),l=Object(c.a)(t,2),i=l[0],m=l[1];return Object(r.useEffect)((function(){m(a.current.offsetWidth)}),[]),n.a.createElement(C.a,{variant:"outlined",className:"search-bar-input collection-sort toolbar-button-container"},n.a.createElement(k.a,{ref:a,htmlFor:"outlined-sort-native-simple"},"Sort"),n.a.createElement(P.a,{native:!0,value:e.currentSort,onChange:function(a){e.selectSort(a.target.value)},labelWidth:i,inputProps:{name:"sort",id:"outlined-sort-native-simple"}},[{name:"name",display:"Name"},{name:"yearpublished",display:"Year Published"},{name:"minplayers",display:"Minimum Players"},{name:"maxplayers",display:"Maximum Players"},{name:"playingtime",display:"Play Time"}].map((function(e){return n.a.createElement("option",{value:e.name,key:e.name},e.display)}))))}var S=t(138),T=t(151),B=t(137);function A(e){var a=Object(r.useState)(""),t=Object(c.a)(a,2),l=t[0],i=t[1],m=e.setUsername;Object(r.useEffect)((function(){var e=new URLSearchParams(window.location.search);e.has("username")&&(m(e.get("username")),i(e.get("username")))}),[m]);var o=Object(r.useRef)(null),s=Object(r.useState)(0),u=Object(c.a)(s,2),d=u[0],g=u[1];Object(r.useEffect)((function(){g(o.current.offsetWidth)}),[]);return n.a.createElement(C.a,{className:"search-bar-input username-search toolbar-button-container",variant:"outlined"},n.a.createElement(k.a,{ref:o,htmlFor:"username-search"},"Username"),n.a.createElement(T.a,{id:"username-search",value:l,onKeyUp:function(e){13!==e.charCode&&"Enter"!==e.key||m(l)},onChange:function(e){i(e.target.value)},endAdornment:n.a.createElement(B.a,{position:"end"},n.a.createElement(S.a,{onClick:function(){return m(l)},className:"search-bar-button",edge:"end"},n.a.createElement(h.a,{icon:E.b}))),labelWidth:d}))}var M=t(150),D=t(47),L=t(136),U=t(142),G=t(141),H=t(60),R=t(152);function W(e){var a=Object(r.useState)((function(){return e.currentFilter?e.currentFilter:[e.range.min,e.range.max]})),t=Object(c.a)(a,2),l=t[0],i=t[1];return n.a.createElement("div",{className:"".concat(e.classes," range-slider-filter")},n.a.createElement(H.a,{variant:"h6",className:"filter-list-item-title",gutterBottom:!0},e.title),n.a.createElement(H.a,{variant:"subtitle1"},l[0]," - ",l[1]),n.a.createElement(R.a,{id:"range-slider",value:l,onChange:function(e,a){i(a)},onChangeCommitted:function(a,t){e.setFilter(t)},valueLabelDisplay:"off","aria-labelledby":"range-slider",min:e.range.min,max:e.range.max,track:e.track,marks:!0,step:e.step}))}function z(e){var a=Object(r.useState)((function(){if(e.currentFilter){var a=e.currentFilter[0],t=e.currentFilter[1];return[e.years.indexOf(a),e.years.indexOf(t)]}return[0,e.years.length-1]})),t=Object(c.a)(a,2),l=t[0],i=t[1];return n.a.createElement("div",{className:"year-published-slider range-slider-filter"},n.a.createElement(H.a,{variant:"h6",className:"filter-list-item-title",gutterBottom:!0},"Year Published"),n.a.createElement(H.a,{variant:"subtitle1"},e.years[l[0]]," - ",e.years[l[1]]),n.a.createElement(R.a,{id:"range-slider",value:l,onChange:function(e,a){i(a)},onChangeCommitted:function(a,t){var r=t,n=[e.years[r[0]],e.years[r[1]]];e.setFilter(n)},valueLabelDisplay:"off","aria-labelledby":"range-slider",min:0,max:e.years.length-1,marks:!0}))}var Y=t(14),q=t(140),J=t(147),I=t(139);function K(e){var a=Object(r.useState)(!1),t=Object(c.a)(a,2),l=t[0],i=t[1],m=Object.keys(e.options).sort((function(a,t){return e.options[t]-e.options[a]})),o=function(a){var t=a.target.value;e.currentFilter.includes(t)?e.setFilter(e.currentFilter.filter((function(e){return e!==t}))):e.setFilter([].concat(Object(Y.a)(e.currentFilter),[t]))},s=function(a){return n.a.createElement("div",{className:"check-list-option",key:a.toLocaleLowerCase()},n.a.createElement(I.a,{control:n.a.createElement(J.a,{color:"default",checked:e.currentFilter.includes(a),onChange:o,value:a}),label:a}),n.a.createElement(M.a,{label:"".concat(e.options[a]),variant:"outlined"}))};return n.a.createElement("div",{className:e.classes},n.a.createElement(H.a,{variant:"h6",className:"filter-list-item-title",gutterBottom:!0},e.title),n.a.createElement("div",{className:"check-list-container"},m.slice(0,10).map(s),n.a.createElement(q.a,{in:l,unmountOnExit:!0},m.slice(10).map(s)),n.a.createElement(O.a,{variant:"outlined",onClick:function(){return i(!l)}},l?"Hide":"See All")))}function Q(e){var a=e.collection,t=e.filters,r=e.setFilters,l=y.getFilterData(a),i=[{filter:"playercount",title:"Player Count",track:"normal",step:1,range:{min:l.minPlayerCount,max:l.maxPlayerCount}},{filter:"playtime",title:"Play Time",track:"normal",step:5,range:{min:l.minPlayTime,max:l.maxPlayTime}}];return console.log(l),n.a.createElement(L.a,{disablePadding:!0},n.a.createElement(G.a,null,n.a.createElement(H.a,{variant:"h5"},"Filters"),n.a.createElement(O.a,{onClick:e.closeDrawer,className:"close-btn"},"Close")),i.map((function(e){return n.a.createElement(U.a,{key:e.filter},n.a.createElement(W,{title:e.title,classes:"".concat(e.filter,"-slider"),track:e.track,step:e.step,range:e.range,currentFilter:t[e.filter]?[t[e.filter].min,t[e.filter].max]:void 0,setFilter:function(a){var n={};n[e.filter]={min:a[0],max:a[1]},r(Object(D.a)({},t,{},n))}}))})),n.a.createElement(U.a,null,n.a.createElement(z,{years:l.years,currentFilter:t.yearpublished?[t.yearpublished.min,t.yearpublished.max]:void 0,setFilter:function(e){var a={yearpublished:{min:e[0],max:e[1]}};r(Object(D.a)({},t,{},a))}})),["category","mechanic","family","designer","artist","publisher"].map((function(e){var a="boardgame".concat(e);return n.a.createElement(U.a,{key:a},n.a.createElement(K,{title:e,classes:"".concat(e,"-checklist"),options:l[e],currentFilter:t[a]||[],setFilter:function(e){var n={};n[a]=e,r(Object(D.a)({},t,{},n))}}))})))}t(85);function V(e){var a=Object(r.useState)(!1),t=Object(c.a)(a,2),l=t[0],i=t[1],m=Object(r.useState)(0),o=Object(c.a)(m,2),u=o[0],d=o[1],g=Object(r.useState)({}),p=Object(c.a)(g,2),b=p[0],y=p[1],f=e.setCollectionFilter;Object(r.useEffect)((function(){d(Object.keys(b).length),f(b)}),[b,f]);var h=e.collection.length<1||e.collection[0].hasOwnProperty("error");return n.a.createElement("div",{className:"filter-drawer-btn-wrapper toolbar-button-container"},n.a.createElement(O.a,{disabled:h,onClick:function(){return i(!0)},className:"search-bar-input",variant:"outlined"},"Filters",n.a.createElement(M.a,{variant:"outlined",size:"small",label:u})),n.a.createElement(s.a,{className:"filter-drawer-wrapper",open:l,onClose:function(){return i(!1)},anchor:"bottom"},n.a.createElement(Q,{collection:e.collection,filters:b,setFilters:y,closeDrawer:function(){return i(!1)}})))}var X=t(52),Z=t.n(X),$=t(59),_=function(e,a){return e.getElementsByTagName(a)[0].getAttribute("value")},ee=function(e,a){return Array.from(e.querySelectorAll("link[type=".concat(a,"]"))).map((function(e){return e.getAttribute("value")}))},ae={getCollectionForUser:function(e){return fetch("https://www.boardgamegeek.com/xmlapi2/collection?username=".concat(e,"&excludesubtype=boardgameexpansion&own=1")).then((function(e){return e.text()})).then((function(e){return(new DOMParser).parseFromString(e,"text/xml")})).then((function(e){return Promise.all(Array.from(e.getElementsByTagName("item")).map((function(e){var a=e.getAttribute("objectid");return ae.getBoardGame(a)})))})).catch((function(e){return console.log("Error: ".concat(e)),[{error:e}]}))},getBoardGame:function(){var e=Object($.a)(Z.a.mark((function e(a){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://www.boardgamegeek.com/xmlapi2/thing?id=".concat(a,"&type=boardgame")).then((function(e){return e.text()})).then((function(e){return(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("item")[0]})).then((function(e){return{id:(a=e).getAttribute("id"),name:a.querySelector('name[type="primary"]').getAttribute("value"),description:a.getElementsByTagName("description")[0].innerHTML.replace(/&amp;#10;/g,"\n"),image:a.getElementsByTagName("image")[0].innerHTML,thumbnail:a.getElementsByTagName("thumbnail")[0].innerHTML,yearpublished:_(a,"yearpublished"),minplayers:_(a,"minplayers"),maxplayers:_(a,"maxplayers"),playingtime:_(a,"playingtime"),minplaytime:_(a,"minplaytime"),maxplaytime:_(a,"maxplaytime"),boardgamecategory:ee(a,"boardgamecategory"),boardgamemechanic:ee(a,"boardgamemechanic"),boardgamefamily:ee(a,"boardgamefamily"),boardgamedesigner:ee(a,"boardgamedesigner"),boardgameartist:ee(a,"boardgameartist"),boardgamepublisher:ee(a,"boardgamepublisher")};var a})));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},te=ae;t(87);function re(e){var a=Object(r.useState)(""),t=Object(c.a)(a,2),l=t[0],i=t[1],m=e.setCollection;return Object(r.useEffect)((function(){""!==l&&te.getCollectionForUser(l).then((function(e){m(e)}))}),[l,m]),n.a.createElement(F.a,{className:"search-bar",position:"sticky"},n.a.createElement(N.a,{disableGutters:!0},n.a.createElement(A,{setUsername:i}),n.a.createElement(w,{currentSort:e.collectionSort,selectSort:e.setCollectionSort}),n.a.createElement(V,{collection:e.collection,setCollectionFilter:e.setCollectionFilters})))}function ne(e){return n.a.createElement("div",{className:"display"},e.games.map((function(e){return n.a.createElement("img",{src:e.image,alt:e.name})})))}t(88);i.a.render(n.a.createElement((function(){var e,a=Object(r.useState)(Array()),t=Object(c.a)(a,2),l=t[0],i=t[1],m=Object(r.useState)("name"),o=Object(c.a)(m,2),s=o[0],u=o[1],d=Object(r.useState)({}),g=Object(c.a)(d,2),p=g[0],b=g[1],y=Object(r.useState)(""),f=Object(c.a)(y,2),h=f[0],E=f[1];return Object(r.useEffect)((function(){var e=new URLSearchParams(window.location.search);e.has("display")&&E(e.get("display"))}),[]),h&&l.length?n.a.createElement(ne,{displayMode:h,games:l}):(e=l.length&&l[0].hasOwnProperty("error")?n.a.createElement("div",{className:"bgg-error"},n.a.createElement("div",null,"Sorry, something has gone wrong.",n.a.createElement("br",null),"Try again in a few minutes.")):n.a.createElement(j,{games:l,sort:s,filters:p}),n.a.createElement("div",{className:"App"},n.a.createElement(re,{collection:l,setCollection:i,collectionSort:s,setCollectionSort:u,setCollectionFilters:b}),e))}),null),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.b0640565.chunk.js.map